{% extends "base.html" %} {% block content %}
<div class="card shadow-lg mx-auto" style="max-width: 700px">
  <div class="card-header fw-semibold">
    {{ match.game_name }}
    <span class="text-muted small float-end">
      Criada {{ match.time_since_creation }}
    </span>
  </div>

  <div class="card-body">
    <p class="mb-1">
      <strong>Plataforma:</strong> {{ match.get_platform_display }}
    </p>
    <p class="mb-3">
      <strong>MÃ¡x. jogadores:</strong> {{ match.max_players }} <br />
      <strong>Jogadores atuais:</strong> {{ match.players.count }}
    </p>

    <h6 class="fw-semibold">Jogadores:</h6>
    <ul class="list-group mb-4">
      {% for player in players %}
      <li
        class="list-group-item d-flex justify-content-between align-items-center"
      >
        {{ player.user.username }} {% if player.user == match.owner %}
        <span class="badge bg-primary">Host</span>
        {% endif %}
      </li>
      {% empty %}
      <li class="list-group-item text-muted text-center">
        Nenhum jogador ainda.
      </li>
      {% endfor %}
    </ul>

    <div class="d-flex justify-content-between">
      <a href="{% url 'match_list' %}" class="btn btn-secondary">Voltar</a>

      {% if user.is_authenticated %} {% if user in match.player_users %}
      <a href="{% url 'leave_match' match.id %}" class="btn btn-outline-danger"
        >Sair da partida</a
      >
      {% elif not match.is_full %}
      <a href="{% url 'join_match' match.id %}" class="btn btn-accent"
        >Entrar na partida</a
      >
      {% else %}
      <span class="badge bg-secondary align-self-center">Partida cheia</span>
      {% endif %} {% endif %}
    </div>
  </div>
</div>
{% endblock %}
